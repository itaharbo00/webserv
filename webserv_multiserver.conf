# Configuration multi-serveur pour tester le support de plusieurs ports
# et les virtual hosts (même port, différents server_name)

# Serveur 1 : Port 8080
server {
	listen 8080;
	server_name localhost;
	root ./www;
	index index.html;
	client_max_body_size 10485760;

	error_page 404 ./www/errors/404.html;
	error_page 500 ./www/errors/500.html;

	location / {
		allow_methods GET POST DELETE;
	}

	location /upload {
		allow_methods POST;
		upload_store ./uploads_8080;
	}
}

# Serveur 2 : Port 8081
server {
	listen 8081;
	server_name server2.local;
	root ./www;
	index about.html;
	client_max_body_size 5242880;

	location / {
		allow_methods GET;
	}

	location /api {
		allow_methods GET POST;
	}

	location /upload {
		allow_methods POST;
		upload_store ./uploads_8081;
	}
}

# Serveur 3 : Port 8082
server {
	listen 8082;
	server_name server3.local;
	root ./www;
	index test.html;

	location / {
		allow_methods GET POST DELETE;
	}

	location /redirect {
		allow_methods GET;
		return 301 /about.html;
	}
}

# Serveur 4 : Virtual Host sur port 8080 (même port que Serveur 1)
server {
	listen 8080;
	server_name vhost.local;
	root ./www;
	index test.html;

	location / {
		allow_methods GET POST;
	}

	location /vhost-specific {
		allow_methods GET;
	}
}
